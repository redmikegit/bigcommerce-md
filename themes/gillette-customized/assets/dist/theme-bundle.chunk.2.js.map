{"version":3,"sources":["webpack:///./assets/js/theme/product.js","webpack:///./assets/js/theme/product/video-gallery.js"],"names":["Product","context","url","window","location","href","$reviewLink","$","$bulkPricingLink","reviewModal","modalFactory","onReady","validator","document","on","indexOf","history","replaceState","title","pathname","collapsibleFactory","this","productDetails","ProductDetails","BCData","product_attributes","setProductVariant","videoGallery","bulkPricingHandler","$reviewForm","classifyForm","length","review","Review","registerValidation","ariaDescribeReviewInputs","performCheck","areAll","productReviewHandler","$form","find","each","_","input","$input","msgSpanId","attr","siblings","trigger","PageManager","VideoGallery","$element","$player","$videos","currentVideo","bindEvents","selectNewVideo","e","preventDefault","$target","currentTarget","id","data","$selectedThumb","setMainVideo","setActiveThumb","removeClass","addClass","bind","index","element","$el"],"mappings":"6UAS0C,IAErBA,EAAO,Y,QACxB,WAAYC,GAAS,MAKwC,OAJzD,cAAMA,IAAQ,MACTC,IAAMC,OAAOC,SAASC,KAC3B,EAAKC,YAAcC,EAAE,wCACrB,EAAKC,iBAAmBD,EAAE,yCAC1B,EAAKE,YAAcC,YAAa,sBAAsB,GAAG,E,EANrC,G,EAAA,G,sEAOvB,kBAiEA,OAjEA,EAEDC,QAAA,WAAU,IAQFC,EARE,OAENL,EAAEM,UAAUC,GAAG,sBAAsB,YACU,IAAvC,EAAKZ,IAAIa,QAAQ,kBAAkE,mBAAhCZ,OAAOa,QAAQC,cAClEd,OAAOa,QAAQC,aAAa,KAAMJ,SAASK,MAAOf,OAAOC,SAASe,aAO1EC,cAEAC,KAAKC,eAAiB,IAAIC,IAAehB,EAAE,gBAAiBc,KAAKpB,QAASE,OAAOqB,OAAOC,oBACxFJ,KAAKC,eAAeI,oBAEpBC,cAEAN,KAAKO,qBAEL,IAAMC,EAAcC,YAAa,qBAEjC,GAA2B,IAAvBD,EAAYE,OAAhB,CAEA,IAAMC,EAAS,IAAIC,IAAO,CAAEJ,gBAE5BtB,EAAE,QAAQO,GAAG,QAAS,wCAAwC,WAC1DF,EAAYoB,EAAOE,mBAAmB,EAAKjC,SAC3C,EAAKkC,yBAAyBN,MAGlCA,EAAYf,GAAG,UAAU,WACrB,QAAIF,IACAA,EAAUwB,eACHxB,EAAUyB,OAAO,aAMhChB,KAAKiB,yBACR,EAEDH,yBAAA,SAAyBI,GACrBA,EAAMC,KAAK,gBAAgBC,MAAK,SAACC,EAAGC,GAChC,IAAMC,EAASrC,EAAEoC,GACXE,EAAeD,EAAOE,KAAK,QAAO,OAExCF,EAAOG,SAAS,QAAQD,KAAK,KAAMD,GACnCD,EAAOE,KAAK,mBAAoBD,OAEvC,EAEDP,qBAAA,YAC+C,IAAvCjB,KAAKnB,IAAIa,QAAQ,kBACjBM,KAAKf,YAAY0C,QAAQ,UAEhC,EAEDpB,mBAAA,YAC+C,IAAvCP,KAAKnB,IAAIa,QAAQ,kBACjBM,KAAKb,iBAAiBwC,QAAQ,UAErC,EAxEuB,CAASC,M,mDCXrC,8CAAO,IAAMC,EAAY,WACrB,WAAYC,GACR9B,KAAK+B,QAAUD,EAASX,KAAK,uBAC7BnB,KAAKgC,QAAUF,EAASX,KAAK,qBAC7BnB,KAAKiC,aAAe,GACpBjC,KAAKkC,aACR,kBA2BA,OA3BA,EAEDC,eAAA,SAAeC,GACXA,EAAEC,iBAEF,IAAMC,EAAUpD,EAAEkD,EAAEG,eAEpBvC,KAAKiC,aAAe,CAChBO,GAAIF,EAAQG,KAAK,WACjBC,eAAgBJ,GAGpBtC,KAAK2C,eACL3C,KAAK4C,kBACR,EAEDD,aAAA,WACI3C,KAAK+B,QAAQN,KAAK,MAAO,2BAA2BzB,KAAKiC,aAAaO,KACzE,EAEDI,eAAA,WACI5C,KAAKgC,QAAQa,YAAY,aACzB7C,KAAKiC,aAAaS,eAAeI,SAAS,cAC7C,EAEDZ,WAAA,WACIlC,KAAKgC,QAAQvC,GAAG,QAASO,KAAKmC,eAAeY,KAAK/C,QACrD,EAjCoB,GAoCV,SAASM,IAEEpB,EAAE,wBAEVkC,MAAK,SAAC4B,EAAOC,GACvB,IAAMC,EAAMhE,EAAE+D,GACQC,EAAIT,KALZ,2BAKuCZ,GAMrDqB,EAAIT,KAXU,gBAWM,IAAIZ,EAAaqB,U","file":"theme-bundle.chunk.2.js","sourcesContent":["/*\n Import all product specific js\n */\nimport PageManager from './page-manager';\nimport Review from './product/reviews';\nimport collapsibleFactory from './common/collapsible';\nimport ProductDetails from './common/product-details';\nimport videoGallery from './product/video-gallery';\nimport { classifyForm } from './common/utils/form-utils';\nimport modalFactory from './global/modal';\n\nexport default class Product extends PageManager {\n    constructor(context) {\n        super(context);\n        this.url = window.location.href;\n        this.$reviewLink = $('[data-reveal-id=\"modal-review-form\"]');\n        this.$bulkPricingLink = $('[data-reveal-id=\"modal-bulk-pricing\"]');\n        this.reviewModal = modalFactory('#modal-review-form')[0];\n    }\n\n    onReady() {\n        // Listen for foundation modal close events to sanitize URL after review.\n        $(document).on('close.fndtn.reveal', () => {\n            if (this.url.indexOf('#write_review') !== -1 && typeof window.history.replaceState === 'function') {\n                window.history.replaceState(null, document.title, window.location.pathname);\n            }\n        });\n\n        let validator;\n\n        // Init collapsible\n        collapsibleFactory();\n\n        this.productDetails = new ProductDetails($('.productView'), this.context, window.BCData.product_attributes);\n        this.productDetails.setProductVariant();\n\n        videoGallery();\n\n        this.bulkPricingHandler();\n\n        const $reviewForm = classifyForm('.writeReview-form');\n\n        if ($reviewForm.length === 0) return;\n\n        const review = new Review({ $reviewForm });\n\n        $('body').on('click', '[data-reveal-id=\"modal-review-form\"]', () => {\n            validator = review.registerValidation(this.context);\n            this.ariaDescribeReviewInputs($reviewForm);\n        });\n\n        $reviewForm.on('submit', () => {\n            if (validator) {\n                validator.performCheck();\n                return validator.areAll('valid');\n            }\n\n            return false;\n        });\n\n        this.productReviewHandler();\n    }\n\n    ariaDescribeReviewInputs($form) {\n        $form.find('[data-input]').each((_, input) => {\n            const $input = $(input);\n            const msgSpanId = `${$input.attr('name')}-msg`;\n\n            $input.siblings('span').attr('id', msgSpanId);\n            $input.attr('aria-describedby', msgSpanId);\n        });\n    }\n\n    productReviewHandler() {\n        if (this.url.indexOf('#write_review') !== -1) {\n            this.$reviewLink.trigger('click');\n        }\n    }\n\n    bulkPricingHandler() {\n        if (this.url.indexOf('#bulk_pricing') !== -1) {\n            this.$bulkPricingLink.trigger('click');\n        }\n    }\n}\n","export class VideoGallery {\n    constructor($element) {\n        this.$player = $element.find('[data-video-player]');\n        this.$videos = $element.find('[data-video-item]');\n        this.currentVideo = {};\n        this.bindEvents();\n    }\n\n    selectNewVideo(e) {\n        e.preventDefault();\n\n        const $target = $(e.currentTarget);\n\n        this.currentVideo = {\n            id: $target.data('videoId'),\n            $selectedThumb: $target,\n        };\n\n        this.setMainVideo();\n        this.setActiveThumb();\n    }\n\n    setMainVideo() {\n        this.$player.attr('src', `//www.youtube.com/embed/${this.currentVideo.id}`);\n    }\n\n    setActiveThumb() {\n        this.$videos.removeClass('is-active');\n        this.currentVideo.$selectedThumb.addClass('is-active');\n    }\n\n    bindEvents() {\n        this.$videos.on('click', this.selectNewVideo.bind(this));\n    }\n}\n\nexport default function videoGallery() {\n    const pluginKey = 'video-gallery';\n    const $videoGallery = $(`[data-${pluginKey}]`);\n\n    $videoGallery.each((index, element) => {\n        const $el = $(element);\n        const isInitialized = $el.data(pluginKey) instanceof VideoGallery;\n\n        if (isInitialized) {\n            return;\n        }\n\n        $el.data(pluginKey, new VideoGallery($el));\n    });\n}\n"],"sourceRoot":""}